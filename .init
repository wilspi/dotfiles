#!/usr/bin/env bash

# get file path
file_path="`dirname \"$0\"`"
file_path="`( cd \"$file_path\" && pwd -P )`"
if [ -z "$file_path" ] ; then
  exit 1
fi
export cwd="$file_path"
echo "export dotfiles_path=\"$file_path\"" > ~/.dotfiles_path
bash_files=".bashrc .bash_profile .bash_aliases"

# creating $old_dotfiles for backup of any existing dotfiles
old_dotfiles=~/dotfiles_old	
mkdir -p "$old_dotfiles/bash"

# symlink bash files in home directory
for file in $bash_files; do
	[ -f ~/$file ] && mv ~/$file "$old_dotfiles/bash"
	[ -f $cwd/bash/$file ] && ln -s "$cwd/bash/$file" ~/$file
done


# reload bash_profile
source ~/.bash_profile

# Run OSX specific script
if [ "$(uname -s)" = "Darwin" ]; then
	$cwd/macos/.init
fi